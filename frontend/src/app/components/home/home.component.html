<div class="container">
  <div class="home-container">

    <div class="row">
      <div class="col-lg-4 col-md-4">
        <div *ngFor="let user of users" (click)="updateSelectedUser(user)">
          <h2>{{user.name}}</h2>
          <p id="{{user._id}}_status">{{user.status == '0' ? 'offline' : 'online'}}</p>
        </div>
      </div>
      <div class="col-lg-8 col-md-8" *ngIf="selectedUser">
        <div class="chat-box">
          <div class="chat-header">
            <img [src]="selectedUser.image">
            <p>{{selectedUser.name}}</p>
          </div>
          <div class="chat-content">
            <div class="message-container" id="message-container-id" #scroll>
              <div class="message" *ngFor="let message of messageArray ; let last =last"
                [ngClass]="message.senderId == id ? 'same-user':'no_user'">
                <p><span id="{{message._id}}_container">{{message.isdelete ? 'This message was deleted' : message.message}}</span><mat-icon *ngIf="message.senderId == id" (click)="deleteText(message._id)">delete</mat-icon></p>
                {{last ? scrollToBottom() : '' }} <!--Scrolls to bottom -->
              </div>
            </div>
          </div>
          <div class="chat-footer">
            <div class="row">
              <div class="col-lg-10 col-md-9">
                <input type="text" [(ngModel)]="newMessage" class="form-control" placeholder="Type a message">
              </div>
              <div class="col-lg-2 col-md-3">
                <button class="btn btn-primary" (click)="sendMessage($event)">
                  Send Message
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>


